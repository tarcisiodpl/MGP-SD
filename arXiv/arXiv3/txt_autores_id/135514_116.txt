  The way experts manage uncertainty usually changes depending on the task they are performing  This fact has lead us to consider the problem of communicating modules  task implementations  in a large and structured knowledge based system when modules have different uncertainty calculi  In this paper  the analysis of the communication problem is made assuming that  i  each uncertainty calculus is an inference mechanism defining an entailment relation  and therefore the communication is considered to be inference preserving  and  ii  we restrict ourselves to the case which the different uncertainty calculi are given by a class of truth functional Multiple valued Logics      INTRODUCTION  Most expert system  ES  building tools with uncertainty management capabilities provide a unique and global method for representing and combining evidence  Nevertheless  human experts usually change the way they manage uncertainty depending on the task they are performing  To be able to model this behaviour  an ES building tool must allow to attach different uncertainty calculi to the structures implementing the different tasks  in modular ES shells the notion of task is usually implemented as goal oriented modules  However  tasks or modules in a knowledge base are not independent one of each other  they need to cooperate and communicate  as human experts do when solving complex problems  This can be shown in the following example  A physician diagnosing a pneumonia could ask to a radiologist about the results of a radiological analysis  The simplest and more frequent type of communication is to get an  atomic  answer like   it is likely that the patient has a cavitation in his left lung   Then  to use this information in his own reasoning  the physician must only interpret in his language the linguistic expression likely used by the radiologist  and perhaps to identify it with another uncertainty term  say for example acceptab le  used by himself  But the communication could have been richer than that  atomic  answer  and consist of a more complex piece of information  For instance  the radiologist could have answered    if from a clinical point of view you are very confident that the patient has a bacterial disease and he is also inmunodepressed  then its nearly sure he has a cavitation in his left lung   As in the previous case  to use the radiologist information the physician must again interpret it  However  this time the interpretation can not be only a matter of uncertainty terms  very confident  nearly sure  but also a matter of way of reasoning  if he wants to make use of this information in other situations  i e   patients  which do not match exactly the one expressed above  Therefore  if in a knowledge base we have different uncertainty calculi for different tasks  or modules   and these modules need to communicate  a correspondence between their uncertainty calculi must be established  To model the first type of communication shown in the example  in a modular ES shell only a way of translating the languages of different uncertainty calculi  attached to different modules  is required  However  to model the second type of communication the correspondence is also required to be made inference preserving  The need to preserve sometimes inferences through the communication among tasks can be made clearer by means of another little example from an existing expert system  PNEUMON IAl  Verdaguer         for the diagnosis of    PNEUMON IA is an application developped in the modular rule MILORD  Sierra         that manages linguistically expressed uncertainty  see section   for more details   based expert system shell       Agusti Cullell  Esteva  Garcia  God   and Sierra  pneumoniae  The module  task  Bacteria of this expert system comprises the following rule    If a patient has leukopenia and left deviation then he has a bacterial disease  sure  stating that the certainty about the bacterianicity of a disease depends on the certainty of the facts leukopenia and  eft deviation  which are investigated in another module named Laboratory  Let s suppose that these two modules have different uncertainty calculi  Then we could have two types of communication between them  A first possibility is that Bacteria asks to Laboratory for the two facts  translates the answers and makes its  and  combination to conclude about bacterianicity  The second possibility is Bacteria asks the certainty value of the non atomic sentence  leucopenia and  eft deviation  and translates it  In this last case the  and  combination of the certainty values is performed in the Laboratory module  and the result is afterwards translated to the Bacteria uncertainty calculus and used to conclude about bacterianicity  It seems clear that in order to keep the coherence of the whole diagnosis task  the certainty degree of bacterianicity found out in each case should be the same  To make this sure  the correspondence between the uncertainty calculi of those modules should preserve the inferences made in the Laboratory module when moving to the Bacteria module  The general problem of analyzing conditions under which a correspondence or communication between different tasks with different uncertainty calculi preserves inference is a very hard one  In order to deal with this problem  several approaches could be taken into account  from pure logical ones to more cognitive ones  In  Meseguer         in another but not very different setting  it is argued that   if the approach taken lacks a logical basis to serve as a criterion of correctness the result may be quite ad hoc and unsatisfactory  and it will probably involve a good deal of costly engineering trial and error   Following this  argument  the approach we have chosen is a logical one  but without forgetting cognitive aspects  More concretely  our analysis will be carried out from two main points    first  we will consider uncertainty calculi as inference mechanisms defining logical entailment relationships  Therefore  correspondences  or communications  between different uncertainty calculi will be analyzed as mappings between different entailment systems   interactive algorithm for defining such inference preserving correspondences is proposed  This algorithm has been thought as a mechanism to support human experts when developing applications      ENTAILMENT SYSTEMS  Inference engines of many rule based ES can be considered as implementations of proof calculi  from a set of axioms and a set of inference rules  of some underlying Logical Systems  As it is known  every logical system should have a syntactical and semantical formalizations  The theories of Institutions and Entailments Systems allow to formalize an intuitive notion of logical system from the model and proof theoretic approach point of view respectively   Goguen and Burstall          Meseguer          Harper et a            In this way the Institution approach takes the satisfaction relation between models and sentences as basic whereas the Entailment System approach takes the entailment relation  The communication problem among tasks or modules has been introduced as the problem of defining inference preserving mappings  Therefore  in this paper we focus our attention in the entailment systems approach rather than in the Institutions one  and thus  we are mainly interested in correspondences between different entailment systems  Although a categorical definition of Entailment Systems has been given  Meseguer         for our purposes an Entailment System will consist of a pair  L       where L is a language  a set of sentences  usually built from a set of connectives and a signature that provides a set of sorted symbols   and   is an entailment relation on zLxL  i e  a relation satisfying the following properties  El   reflexivity  for any sentence E   E I  E E    mono tonicity  if r    E and r  r  then r    E E    transitivity  if r    Ei  for iE I and ru Ei  iE I     E then r    E   where r and r  are sets of sentences  and E and Ei are sentences of L  In  Meseguer        the following notion of a map of entailment systems has been proposed     and second  we will use finite truth functional multiple valued logics  MY logics  for short  as uncertainty calculi  as long as this is a simplified view of the uncertainty reasoning model that our laboratory has been working with in developing applications with the MILORD system   Sierra         mainly in the medical diagnosis field   Definition       map of entailment systems  Given the entailment systems  L      and  L          a mapping H L   L  is said to be a map of entailment systems if the following condition If T   E then H T      H E   holds for all set of sentences rand for all sentence E of L  The map H is said to be conservative if r   E whenever H T     H E    The paper is structured in the following way  After this introductory section  in section two there is a general overview on entailment systems and their inference preserving mappings  In section three  we describe the class of finite truth functional multiple valued logics we will use as uncertainty calculi for different tasks  Section four is devoted to a detailed study of inference preserving mappings for our uncertainty calculi  and finally  an  A map between entailment systems allows to preserve inference in a strict sense  In partiCular  when the map is conservative one entailment system is an extension of the other one  However these strong conditions sometimes can be weakened in the uncertainty reasoning framework  From the point of view of the correspondence problem between different tasks with different uncertainty calculi  when a task imports information from another task  it   Combining Multiple valued Logics in a Modular Expert Systems  doesn t need always to deduce exactly the s ame   conclusions as the previous one could deduce  Sometimes it only needs that its conclusions be coherent with the   deduction system of the other task   In other words  It allows its reasoning to be less accurate when dealing with the other task information  but not incorrect in any case  To model this last situation a definition weaker than the conservative one is introduced below  We will call it weak conservative  Definition       weak con servative map   Given entailment systems  L      and  L          a map H from L to L   is called weak conservative if the following condition holds  If H r  J    E  then there exists a sentence Eof L such that Tj  Eand H E  f  E   for all set of sentences r of L and all sentence E of L    If H is also a map of entailment systems we call it weak conservative map      A C LASS OF MULTIPLE VALUED LOGICS FOR THE UNCERTAINTY MANA GEMENT IN RULE BASED EXPERT SYSTEMS  Taking the uncertainty management of MILORD as a reference  in this section we consider a restricted type of MV  logics which are expressive enough to model the uncertainty reasoning used in many rule based systems  The uncertainty management approach used in MILORD has the following characteristics  Godo et al             The expert defines a set of linguistic terms expressing uncertainty corresponding to the verbal scale he will use to weight facts and rules     The set of linguistic terms is supposed to be ordered  at least partially  according to the amount of uncertainty they express  being always the booleans  true  and  false  their maximum and minimum elements respectively     The combination and propagation of uncertainty is performed by operators defined over the set of linguistic terms  basically conjunction  disjunction  negation and detachment operators  A method for the elicitation of these operators from the expert has been proposed in  Lopez de Mantaras et al        The main difference of this approach with respect to other ones is that no underlying numerical representation of the linguistic terms is required  Linguistic terms are treated as mere labels  The only a priori requirement is that these labels should represent an ordered set of expressions about uncertainty  For each logical connective  a set of desirable properties of the corresponding operator is listed  Many of thes propertie are a finite counterpart of those of the uncertamty calcuh based on t norms and t conorms  which are in turn the basis of the usual        valued systems underlying Fuzzy Sets Theory  Alsina et al          The listed properties act as constraints on the set of possible solutions  In this way  all operators fulfilling them are gener ated  This   approach has been implemented by formulating  t as a constraint satisfaction problem  Godo and Meseguer         Finally  the expert may select the one he thinks  fits better his own way of uncertainty management in the current task  These characteristics make clear that the logics associated to the different MILORD uncertainty calculi are a class of finite multiple valued logics  taking the linguistic terms as truth values and the operators as the interpretations of the logical connectives  In other words  each linguistic term set  together with its set of operators  defines a truth values algebra and therefore a corresponding multiple valued logic  In  Agusti Cullell et al          MV logics have been analyzed from the semantic point of view and formalized as families of Institutions  Following that line  the main characteristics of our MV logics for uncertainty management we are concerned with are given by    An algebra of truth values  a finite algebra A    An         N  T  l  such that     The set of truth values An is a chain  represented by     ao   a         an      where   and   are the booleans False and T r u e respectively     The negation operator N is an unary operation such that the following properties hold  N   if a   b then N a    N b  N   N     Id     The  and  operation T is any binary operation such that the following properties hold  Tl  T a b  T b a  T   T a T b c     T T a b  c  T   T O a    T   T   a    a TS  if a    b then T a c  i  T b c  for all c  Note that in the unit interval these properties define t norms functions if we add the condition of continuity     The implication operator I is defined by residuation with respect to T   I a b    Max  c E An such that T a c     b  i e   I is the finite counterpart of an R implication generated by the  and  operator T  Trillas and Valverde           A set of Connectives   not         and     and  implication         A set of Sentences  sentences are pairs of classical like propositional sentences and intervals of truth values  The classical like propositional sentences are built from a set of atomic symbols and the above set of connectives  However the sentences we will consider through this case study are only of the following types   pJ  V    P    P          Pn   V    PI   P      Pn     q  V   where pJ        Pn are literals  atoms or negations of atoms   q is an atomic sentence and V is a subset of truth values  For each truth values algebra A  LA will stand for        Usually the set of truth values An stands for a totally ordered set of linguistic terms that the expert uses to express uncertainty  but nothing changes if it is only partially ordered            Agusti Cullell  Esteva  Garcia  God   and Sierra  the set of sentences with intervals of truth values belonging to A  Models   are defined by valuations  i e  mappings p from to the firsts components of sentences to An provided that  p   p    N  p p    P Pl   pz    T  P Pl   P P     p p     q    I p p   p q     Satisfaction Relation  between models and sentences is defined by  Mp I   p  V  if  and only if p p  E V  where Mp stands for the model eined by a valuation p    Entailment Relation  the rmmmal one generated by    the following set of axioms   A       p    pz  p       P    pz   p        A      p     pz  p        p   P    p       A     pl  pz   pz  pl       A         p   p        the following inference rules  which are sound with respect to the satisfaction relation  Agusti Cullell et a            RI     WEAKENING      p  V  I   p  V    where V c     V  and   is a set of sentences   RI    NOT introduction   p  V        p  N V     RI    AND introduction   Pl Vl     P   Vz      Pl   pz  T  V   Vz     RI    MODUS PONENS   p  V     p   q  Vz      q  MP V   Vz    being if a and b are inconsistent MP a b      a l   if b     T a b   otherwise where a and b are said to be inconsistent if there exists no c such that I a c    b        Notice that these inference rules are the only ones that an inference engine would need when working on sets of sentences of the above specified types  very common in fact in rule based ES  However  instead of the rule RI   and for the sake of simplicity  we will consider the following inference rule   RI     MODIFIED MODUS PONENS   p  V     p   q  Vz  I   q  T V   Vz    Although it is correct for instance in the usual case of upper intervals of truth valus  this inference rule is ot logically sound in general with respect to the sem n cs    satisfaction relation  above defmed  Nevertheless  It IS a well known fact that  from the cognitive point of view  detachment operators share the same properties required to conjunction operators   Bonissone         These arguments  together with self evident simplicity reasons  have lead us to adopt the inference rule RI     Therefore  from now on  given a truth values algebra A we will denote by MVLA the multiple valued logic defined above  and by  LA    A  its associated entailment system  The language of this entailment system is LA and its entailment relation is the minimal one determined by axioms A    A    A   and A    and by inference rules RI   RI    RI   and RI      On the other hand  the disjunction operator needed for parallel combination can be obtained from the negation and conjunction operators using the De Morgan laws  For these reasons  and for deductive purposes  only the ordered set of truth values  linguistic terms  and the conjunction and negation operators should be specified in the truth values algebra definitions  Therefore  from now on  truth values algebras will be represented by  A T N   omitting the booleans   and    as long as they belong to all algebras     INFERENCE P RESERVING BETWEEN MV  LOGICS  MAPS  The aim of this section is to analyze the problem of preserving inference in communicating modules  assuming that each one has its own finite MY  logic as uncertainty calculus  In section two  maps and weak conservative maps of entailment systems have been introduced in order to model inference preserving correspondences  In the first subsection of this section  it is shown that morphisms and quasi morphisms of truth values algebras generate maps and weak conservative maps respectively of the corresponding entailment systems  In the second and third subsection  morphisms and quasi morphisms of truth values algebras are studied  Finally  in the fourth subsection an interactive algorithm to define such mappings to assist human experts when developing applications  is proposed      WEAK CONSERVATIVE MAPS  Now we consider the problem of finding inference preserving correspondences between two of these logics MVLA and MVLB  where A   An  T  N  and B    Bm  T   N   are their corresponding truth values algebras  As  t has been noted in section    the mappings between therr entailment systems  LA  I A  and  LB I B  we are mainly interested in are the weak conservative ones  In order to give a sufficient condition for a mapping f  An     B m to generate a weak conservative mapping between the entailment systems of MVLA and MVLB  we need some new definitions and results  Given a truth values algebra A    A   T N   we consider the set of intervals of A    I An    a b l a b E An  where   a b     x   x E A n  a  x  b    We can define the following order relation in I An    I      ifab for all a E   and for all b E f   Let s consider now the following operations on I An     N   a b     N b   N a      T   at b J  a z bzJ      T apz   T bt bz J It is easy to check that N  is a negation mapping and T  fulfils T  TS  Moreover  identifying every element a of An with the interval  a a  of I An     An   T  N  is a subalgebra of d An   T  N    that is  we have the following proposition      Combining Multiple valued Logics in a Modular Expert Systems  Proposition      Any truth value algebra An  T  N  can be extended to an algebra I An    T   N    of the same type that has An  T  N  as a subalgebra  It is worth noticing that  I An      is only a partial ordered set with minimum         and maximum            and N  and T  are univocally defined by N and T  Next we give a small example of an algebra of intervals generated by a truth values algebra of four elements    Example  Let A      a   b      the chain of four elements  The set of intervals of A is I A     O a    O b           a b    a l    b l           a a    b b            Identifying every interval  x x  with the element x of A  the order relation on A and I A  can be represented by the graphs of figure       A  r r r    A n   T  N  and B  Bm  T   N   respectively  Then every quasi morphism of A to B generates a weak conservative mapping between the entailment systems of MVL A and MVLs     Proof  Let f  An     I B m   be a quasi morphism between A and B  and let r   pr  Vl         pn  Vn   a set of sentences of MVLA  We will denote by H f the translation function from MVLA to MVLa defined by H f  s V      s f V   Obviously H f translates axioms of MVLA into axioms of MVLa  Suppose that in MVLa a sentence E   q  V   can be derived from Hf r      Pl   f Vl          pn  f Vn    and axioms of MVLa by applying a sequence of RI    RI    RI   and RI    inference rules and let s denote by g  the composition of their corresponding inference functions  only functions N  and T  will appear   Then it must be the case that g  f V          f Vn    c V   We have to show that there exists a sentence E of MVLA such that it can be derived from r   A E and thatHf E    B E   Let E be the sentence  q  g Vr       Vn    where g is the function obtained from g  replacing the occurrences of N  and T  by N and T  Then it is clear that rI A E holds and  because f is a quasi morphism  we have f g Vr        Vn   c g  f V l          f Vn    c V   soH f E    B E  also holds and the theorem have been proved         In the particular case of algebra morphisms  the following proposition shows that they also generate maps of entailment systems  Proposition      Let MVL A and MVLB be the multiple valued logics defined on the truth values algebras A   An  T  N   and B  Bm   T   N   respectively  Then every order preserving morphism of A to B generates a map between the entailment systems of MVLA and MVLB        Figure    Graphs of the order relation of A and I A   Next we introduce what we call a quasi morphism of algebras as a weakened notion of morphism  allowing to map values of an algebra into intervals of the other  This tries to capture the possibility of being imprecise when renaming truth values from a MV logic to another  Definition      Given two truth values algebras A     A n   Tj  Nj  and B   Bm  T   N    a mapping f   A n     I Bm  is a quasi morphism from A to B if the following conditions hold  l   f is non decreasing  i e  ifa    b   then f a   f  f b      f  O           f   N J x      N     f x        f  TJ x y    c T     x f y    It is clear from this definition that    i  algebra morphisms are a particular case of algebra quasi morphisms  identifying every element b of B with the interval  b b   Moreover  a quasi morphism f is a morphism if  and only if  f Am  c Bm   ii  algebra morphisms from  A n  T   N    to  l Bm   T    Nz   are also quasi morphisms  Theorem      Let MVLA and MVLB be the multiple valued logics defined on the truth values algebras A         MORPHISMS OF TRUTH VALUES ALGEBRAS  In this subsection we tum our attention to the problem of relating truth values algebras by means of order preserving mappings which are algebra morphisms  and some necessary and or sufficient conditions for their existence are given  Although there can exist algebra morphisms which are not order preserving  for cognitive and logical reasons it seems reasonable to require this condition  Therefore  as long as we are only interested in order preserving mappings  from now on  and for the sake of simplicity  we will use the term morphisms as an abbreviation of order preserving morphism with f O     We begin with some well known results on negation operators  For each chain A   there exists only one negation N and it is defined by N ai    an i   Then every chain A  can be partitioned in three subsets    the set of negative elements Nn   xI x   N x     the set of fixed elements  Fn  xI x N x         the set of positive elements Pn  xI x   N x              Agusti Cullell  Esteva  Garda  God   and Sierra  being these subsets  F n    ak    Nn     ai I kk    P n     ai I i k    if n   k    and  F n     Nn     ai I kk  and     ai I ik    if n  k  The following equalities also hold  N Nn    Pn  N  F n     F n and N Pn   Nn   Pn  Proposition      Given two chains An and Bm   a mapping f  An     Bm is a morphism with respect to the negation operator if  and only if  the following conditions hold    f Nn is an order preserving mapping from Nn to  Nmu  m such that f O      f   n  F m    f ai belongs to Pn J ai    N  j an i      where N   is the negation associated to Bm        From this proposition it is easy to show that    If n is odd then  in order to be f a morphism  m must be also odd  as long as f  F n     F m        In the case of being n even or both n and m odd  every mapping ft  Nn     Nmu F m defines a negation morphism in the following way  if a i E N n f   ai       if a r E  F  n and  F  m    br   f ai   br   N  f   N ai     if a i E P n and reciprocally  every negation morphism  is defined by the mapping f    fiN n  We follow now with two propositions about how  and  operations can defined in order to have algebra morphisms  Proposition      Let  An   N  T   be a truth values  algebra and let Bm a chain containing An such that the negation N  associated to B fulfils N jAn   N  i e  if ai   bj then N  ai  bm j   Then there exists at least an  and  operation T  on Bm such that An  N  T  is a subalgebra of  Bm   N    T        Proof It can be easily checked that the mapping T  defined as  T p  q    if p     and q       T   p q  If q     p  q  if p     where p   max  x E An I x  S p    is an  and  operation on Bm   and that it also verifies T IAnxAn  T          Proposition      Let  An   T  N  be a truth values algebra and letf  An     Bm be a negation morphism  Then there exists an  and  operation T  on Bm such that f is an algebra morphism if  and only if  f is compatible with T  that is  for all a b c d E An fa      f  b  andf c    f d  imply f T  a c   f T b d       Proof  Obviously  if f is an algebra morphism it is compatible with T  On the other hand  if f is compatible with T  the relation  f defined as a  f b ifbEF f a    f b  is a congruence relation on An  Let   A nl f   Tf  Nf  be the quotient algebra  Therefore  identifying An  f with  f An   f will be a morphism from  An   T  N  to   f An   Tf  Nf   By proposition     there exists T  on Bm such that   f An   T f  Nf  is a subalgebra of  Bm   T   N    where N  is the negation associated to Bm   Now  taking into account the above results  it is interesting to point out some considerations about the problem of algebra morphism generation  In the following A will stand for a truth values algebra  An   T  N  and Bm for a chain of m elements     If n is odd and m even  there is no possible morphism between A and B  being B any truth values algebra defined on Bm  Then  this case will not be considered any more     In order to define a morphism f  An     Bm with respect to the negation operator we only need to take any mapping fi  Nn     N m u F  m with f        and to extend it in the way above indicated        The generation of possible operations T  on Bm   together with renaming mappings f from An to Bm such that f   An  T  N       B m   T   N   are morphisms  is a process that can be automated without difficulties  The problem reduces to    first  to generate all mappings f from all order  preserving mappings f   N n     N mu F m with f           second  to check which ones are compatible with T    and third  to generate all algebras B m containing f Am  as subalgebra  This method will provide us with a family of suitable algebras  Bm  T   N   for each mapping f      Nevertheless  in general  it can be the case that the set of possible solutions would be empty  As an example  consider the algebra  A   T N   where A    O al az l   and the  and  operation T is the one given in figure         J   a  az       a   az                    a       al az    a  az    Figure     And  operation in a chain of four elements It is easy to check that there exists no renaming mapping from A  to B  such that a morphism between  A  T N  and  B   T   N   can be defined for any  and  operation T   Let B     O b l   and thus N          F     b   and P       It is clear that if f      a        O b  is order preserving and f            then there are only two possibilities     f  a        and then the mapping f  A     B  is defined by f O    f a    and f az    f         but f is not compatible with T  because f az    f l  but f T az az            f T az        Combining Multiple valued Logics in a Modular Expert Systems      f  a    b  and then the mapping f  A      B  is defined by f O     f al    f az     b  and f         but again f is not compatible with T  because f al   f az  but     b f T az az    f T a  a               QUASI MO RPHISMS OF TRUTH VALUES ALGEBRAS  As we have seen in last section  given any truth values algebras A and B  it is not always possible to find a morphism between them  However  this is not the case of quasi morphisms because of the additional freedom of mapping  or renaming  a truth value of A to an interval of B  This point is proved in the following proposition  Proposition      Let A    An  TJ  NJ  and B  Bm  Tz  Nz  be two truth values algebras  Let C   Cko T   N   be an algebra that can be imbedded in both A and B  and let h  and hz their corresponding monomorphisms  Then there exists at least one quasi morphism f from A to B such that f hz c   hz c   for a   c E Ck     Figure     And  operations in chains of five and seven elements  It can be checked that there is no morphism from A to B  On the other hand C    C   T    N    being C     b l  and T  x y    min x y   is the maximal subalgebra that can be imbedded into A and B  and the monomorphisms h  and h  are defined by  hz O  o h       o hz b  b  h  b  a  h       hz  O    respectively  The above proposition     assures that the mapping f  As   I B   defined by  f O    f ai   O b   f az  b  f a      b  l  f l    is a quasi morphism from A to B                 Proof  First of all  notice that given A and B there always exists the algebra C  because at least the algebra of booleans satisfies the required condition for any pair of truth values algebras  So  let h  and h z be the corresponding monomorphisms from C to A and B respectively  and consider the mapping f  A n     l Bm   defined by  f x      h  Cx    h  Cx   l where ex  max c of Ck   h l  c  x  and ex   min   c of Ck   h   c   x    Straightforward computation shows that the required properties for f to be a quasi morphism hold  As an example  let s consider the algebras A     As  T  N  and B    B   T   N    where the  and  operations T and T  are given in figure   respectively      a   a   a        a  az a                    a  a  a     a  az az az    a  az a  a     a  az a      LJ     bl  b   b   bs       br         bl  bz   bj    bj    bj    bl    bj  bz b  b  bs             bj bl bj bj br  bz bz bz bz bz  bz b  b  b  b   bz b  b  b  b   bz b  b  bs bs  bz b  b  bs    lJ             P R AGMATICS OF INFERENCE PRESERVING MAPPINGS  In the previous sections we have seen that when two modules  that use different multiple valued logical languages  need to communicate  an inference preserving mapping between their logics has to be defined  The process of defining these mappings could be supported by an interactive algorithm based on the notion of morphism and quasi morphism between truth values algebras  This process could be as follows  Initially the expert determines a MV  logic for each module  giving the set of truth values and the  and  truth table  and proposes as many as needed renaming functions between different truth values sets  Then  for each pair of modules having different MV  logics  the interactive algorithm will take their truth values algebras and the renaming between them and check if the initial renaming is an algebra quasi morphism  If not  the algorithm presents to the expert the set of possible modifications of the renaming function  each one being a morphism or a quasi morphism  The expert may then select the one that fits better his aims  If no selection is made  possible modifications of the  and  truth table are suggested  keeping the initial renaming function  Finally  if there has not been any solution  possible modifications of both renaming and truth table are suggested  Next  we give an scheme of the algorithm in a Pascal like style  The notation used is the one of the previous sections  Quasi morphism generator  A n  T   Bm  T    f     An and Bm are the truth values sets    T and T  are the  and  connectives   and f is a renaming from An to I Bm       Renaming checking if quasi morphism  A  B  f    A   An  T  and B  Bm  T     This predicate is implicitly defined             Agusti Cullell  Esteva  Garda  God   and Sierra    in the previous sections  Then Return  A  B  f    If the renaming given by the expert   determines a quasi morphism we return   it       Renaming generation R      f  An   I Bm  I quasi morphism  A  B   f      R is the set of all acceptable   renaming functions   The way they are computed is described   below   print R   if select r    r E R is selected by the expert then return  A  B  r        And  truth tables generation C       T  IT  is an  and  operation on Bm and  quasi morphism  A   Bm   T    print C  if select c   f     on Bm such that f be a quasi morphism  The method for finding  and  operations is the following      If f is not a negation morphism  it returns the empty set     Find all  and  operations T  on Bm      Check if f is a quasi morphism  Remarks  A general algorithm for finding truth values algebras over a partially ordered set of n elements is given in  Godo and Meseguer          d  Renaming and truth table generation  Let A be a truth value algebra and let B m be a chain of m elements  Renaming and truth table generation is a  function that  given An and Bm  returns pairs  T  f   where T  is an  and  operation on Bm and f is a quasi morphism from A to  I Bm  T   N     In this case  the method for  finding pairs  T   f  is the following one      Define N   on I Bm       Define all the possible functions f  as in the case of renaming generation     For every f   define the negation morphisms as in the case of renaming generation     Find all  and  operations T  on Bm     Check if f is a quasi morphism     c E C is selected by the expert then return  A   Bm  c   f       Renaming and  and  truth table generation RC      f  T   If  An   I Bm  and quasi morphism  A   Bm  T    f     Final remarks   print RC  if select  x  y       x y  E RC is selected by the expert then return  A   Bm   y   x  else return nil  In the following a constructive description of predicates and functions used in the algorithm is given   a  Renaming checking  It is only a checking predicate  It checks if a given function  renaming  is a quasi morphism from A to B  where A and B are two given algebras  b  Renaming generation  Let A and B be two truth values algebras  Renaming generation is a predicate that  returns all possible quasi morphisms from the truth values algebra A to the interval algebra I B   The method to find these quasi morphisms is the following     Define the operations T   and N   on I B       Define mappings f     N u  f  such that f        f   x  I  f   y          f    f         N  u f      f     and x    y implies           For every f   define the negation morphism f by  f x      f  X    if X E N u   f   N   f  N x     if x E  P   Check if f is a quasi morphism  Remarks  The solutions  if any  contain as a particular case all the possible morphisms from A to B  By proposition      for every pair of algebras A and B  the renaming generation set  A B  is not empty     c   And  truth table generation  Let A be a truth value algebra  let B m be a chain of m elements and let f be a renaming function from A n to I Bm     And  truth table generation is a predicate that returns  and  operations      All these methods can be automated      Some of the functions can return the empty set   see examples of subsections      and          An order of preference on the sets R  C and RC should be given  There are many possibilities to do this  For example  several distances with respect to the initial renaming and truth table operation can be defined on the above sets to obtain preference orderings  It seems reasonable that in all cases algebra morphisms should be preferred to algebra quasi morphisms      The complexity of the algorithm is exponential in the number of truth values  However  two factors make acceptable the execution time of the algorithm   i  the number of different uncertainty linguistic terms used by an expert is usually not greater then nine  Miller         and  ii  the strong conditions required to  and  operations  see section    restrict the combinatorial explosion in the generation of such operations       CONC LUSIONS A N D FUTURE WORK  In this paper  the problem of communicating tasks with different uncertainty calculi has been introduced in a very general framework  This problem arises when dealing with large knowledge based systems in which a better modelling of reasoning for different tasks requires working together with different uncertainty reasoning systems In the framework of rule based expert systems  this problem has been analyzed in detail in the particular case in which different MY logics are used to model the management of uncertainty in different tasks  Necessary and or sufficient conditions for the correspondence mappings between them to be inference preserving have been given  Also an interactive algorithm to define such mappings has been   Combining Multiple valued Logics in a Modular Expert Systems  proposed to assist the human expert in relating tasks or modules by inference preserving correspondences  However the general problem of communicating different uncertainty reasoning systems is very complex  and further research is needed as much in the field of distributed knowledge based systems as in the case of considering more complex models of uncertainty reasoning systems  Acknowledgements This research has been partially supported by the CICYT id    j    project SPES  and by the ESPRIT II Basic Research Action DRUMS  
  The behaviour of these small autonomous robots is  In this paper we present some results obtained with a troupe of low cost robots designed to cooperatively explore and adquire the map of unknown structured orthogonal environments  In order to improve the covering of the explored zone  the robots show different behaviours and cooperate by transferring each other the perceived environment when they meet  The returning robots deliver to a host computer their partial maps and the host incrementally generates the map  of  the  environment  by  means  of  a  possibility  necessity grid  Keywords  uncertain reasoning in situated autonomous robots  map building with uncertainty  possibility  necessity theory     INTRODUCTION  similar  to some degree  to that of ants in two aspects  First  in order to increase the coverage of the environment  the robots have a partially random moving behaviour  and second  the robots cooperate by transferring each other the perceived  environment  when  they  meet   Sharing  information in this way  allows the host to get the information not only from the robots that successfully return after an exploratory run  but also some information from those that could not return  provided that they had encountered robots that safely returned  Using this multi robot strategy to generate a model of the environment  we expect to achieve a better efficiency than that which would be obtained based only on a single expensive robot  The following section in this paper describes the structure and the behaviour of the robots  Then  we describe a statistical error analysis performed in order to know how the error intervals increase with the covered distance and the number of turns  This analysis will be used to model the environment by  means  of possibility necesity  With the aim of exploring an structured environment that  techniques  The fourth  is unknown but easily passable  a troupe of low cost   generation process based on the partial maps perceived by  section describes the map  small autonomous robots has been developed  These  the successfully returning robots  Finally  we describe the  robots follow the already classical line of insect robots  results obtained to date  we briefly point to related work   Alami et al         Brooks        The goal of these  and we mention some future work   autonomous robots is to explore and obtain partial information about an orthogonal environment and deliver this information to a host computer  Exploration is performed moving randomly and following walls  or obstacle edges  when detected  The computer host is expected to generate the most plausible map from the obtained information   This map models the environment in terms of degrees of possibility and necessity of the    STRUCTURE ROBOT  OF  EACH  MOVILE  Each robot has been designed with the aim of being small and cheap  They must have a high autonomy and be endowed with a low cost processor to memorise the perceived environment map   position of the detected walls and obstacles  The reason of choosing possibility necessity techniques instead of  The robots environment perception system and the  probability is our need of an initial assigment of values  communication with the host or with other robots is  representing ignorance  Possibility theory allows a clear  based  representation of ignorance but probability does not  Regarding evidential theory  it is worth noticing that in  communication process consists of delivering the environmental information of a robot and it can be  our case Possibility and Necessity are in fact particular cases of Belief and Plausibility because our frame of  stablished between a robot and the host as well as between two robots that meet along their exploration  Therefore   discernment is fl   wall   wall    on  IR  impulse  modulated  sensors   The  this communication process allows to get all the        Lopez Sanchez  Lopez de Mantaras  and Sierra  information of non returning mini robots that had been transferred to returning ones        MECHANICAL  CHARACTERISTICS  Each robot is    em  length and    em  wide  see Fig      It has three wheels  two of them are   em  steering wheels controlled by independent motors  The robots can reach a maximum speed up of     m sec   and since the battery has about half hour of autonomy  each robot can do a maximum exploration of about      m   P   robot with  routine  behaviour  When the robot finds a frontal obstacle  the turn can be done to the right or to the left based also on a probability value P   The robots having a probability P      will show a tendency to turn to the right more often than to the left  whilst the robots having a probability P      will behave inversely  Consequently  the different robots of the exploration troupe will not show an identical behaviour  They can behave in six different ways corresponding to the different combinations of behaviours and turning tendencies          Impulse generators at each wheel for odometry   The control unit in each robot has been designed having in mind that the hardware had to be as simple as possible but  on the other hand  it had to allow achieving a behaviour sufficiently smart in order to navigate efficiently  Furthermore the robot had to be based on a hardware flexible enough to allow for experimentation of navigation and control strategies  These requirements have resulted in a design which contains three different functional modules   the navigation module that generates the trajectory to be followed  the steering module that controls the motors in order to follow the generated trajectory  and the perception mo dule that acquires information of the environment by means of IR sensors  The computer used to implement the navigation control unit is a   C l   with a  MB RAM to store the perceived environment map  Finally  the steering control module is implemented on a   C    and operates with a resolution of   mm     Five I R  proximity sensors for frontal obstacles detection and for wall following      Figure    Autonomous Mini Robot       SENSING CAPABILITY  Each robot is equipped with the following sensors     A proximity sensor for the detection of the terrain horizontal discontinuities    Safety micro switches for the detection of possible collision    One omnidirectional IR Emitter Receiver sensor to detect other robots and to transmit data   One IR Emitter with a scope of    degrees to generate a priority signal  right hand preference        CONTROL SYSTEM  NAVIGATION STRATEGY  The navigation system incorporated to each robot has a partially random behaviour  The robot does a    or     turn either randomly or when it detects an obstacle  The random turns are done with significantly different probabilities  PpP   P     corresponding to three differentiated behaviours  P t  robot with an  Anxious  behaviour P   robot with  normal  behaviour  ERROR ANALYSIS  With the goal of studying the position error of each robot due to the imprecise odometry and to the imprecise steering  we have performed an analysis based on experimental data obtained from the real robots running straight     feet and    feet  and also turning    degrees left and    degrees right followed by a    feet straight run  We have performed    trials of each run and turning situation for each robot  With the data obtained  we have used the Kolmogorov normality test to verify that the experimental sample indeed follows a normal distribution both in the direction of the trajectory and in the direction perpendicular to the trajectory and we have tested that both distributions are independent  Based on this distributions we have determined the size of an error rectangle  comprising the     of the sample  which is elliptical shaped   associated to the final position of the robot after a straight run of I   feet  This rectangle is     inches  in the direction of the trajectory  x     inches  in the direction perpendicular to the trajectory  in the average  We have also experimentally concluded that the size of the error rectangle is proportional to the covered distance  Concerning the additional error due to turning  we have obtained that when the robots turn    degrees there is  in   Incremental map generation  the average  an error of about   degrees always towards the same direction  For example a robot with   degrees of error towards the left turns    degrees to the right instead of    degrees and turns about    degrees to the left instead of    degrees        ERROR PROPGA TION  In free space  a trajectory is composed of a set of alternating segments and turns  Given the error rectangle at the initial point of a trajectory  we want to determine the error rectangle at the end of each segment taking into account the turning error and the error accumulated along the segment  The next figure shows the error propagation after a right turn  a straight line  another right turn and finally another straight line        the position of the walls detected  and followed  by the infrared sensors along the trectory path  as well as the singular points detected  that is the wall ends and the corners  Due to the unavoidable odometry error  the position of the detected walls has an associated error  As we have explained in the last section  we have experimentally determined this error which has been approximated by a rectangle centered around the cell corresponding to the estimated position of the robot as shown in figure      com unicated   pOSitiOn   discretization  of the error  errorx    error y    Figure    Grid representation of a position and its associated error  Modelling the cenainty of detected walls  Figure    Error propagation  When following a wall  since the robot remains practically always at the same distance from the wall  the error along the direction orthogonal to the wall is taken to be constant and equal to the error that the robot has after turning to place itself parallel to the wall once the wall has been detected  This error analysis and error propagation study is performed on each robot and is used by the host to compute the possibility necessity grid modelling the environment as described in the next section      MAP GENERATION  The space being explored by the robots is discretized by means of a grid  Cells in the grid represent a small area of the real environment and contain two values   the degree of possibility and the degree of necessity of the presence of obstacles  Initially  that is before any exploration has taken place  all the cells have a possibility value n of I and a necessity value N of    These initial values correpond to a situation of total ignorance according to the theory of possibility  Dubois and Prade        As robots communicate the information gathered during their exploration  the possibility and necessity values are modified in a way that depends on the presence  or not  of obstacles  The information gathered by each robot is nothing else but the trajectory of the robot together with  When an error rectangle is associated to a position that belongs to a detected wall  the occupancy certainty degree  that is the certainty about the presence of an obstacle in that position  is expressed by means of necessity values in every cell that results partially or totally covered by the error rectangle around that position  The necessity values decrease linearly with the magnitude of the error and remains positive  N wall    lX     in the cells inside the error rectangle but gets the value   at the cells outside the limits of the rectangle  These values have been established with the aim of reflecting that  having detected some obstacle  the necessity that there is a wall cannot be longer zero but positive since a positive value denotes some certainty degree about the occupancy of the space  However this occupancy certainty degree decreases when the distance to the central cell of the error rectangle increases  Figure   a  shows this case  Notice that the possibility value is constantly equal to   in all the cells covered by the error rectangle  As we have already mentioned in the introduction  in our case Possibility and Necessity values are particular cases of Belief and Plausibility ones  We can easily see how our assigned values N wall  a O and J  wall  l can be considered as Belief wall  and Plausibility wall  corresponding to the following basic probability assignment  b p a    frame of discernment n   wall wall   with mass m P  Q            m       m wall  a  m wall  O  m il  l a  and therefore  we obtain         Lopez Sanchez  Lopez de Mantaras  and Sierra  Bel wall     P A  m wall  m    a  The computation of this height is done locally for each cell in the discretized environment grid on the basis of  LP A  m wall   m Q      a  Pl wall        Af  lwa       the pyramid base  This is done passing four different  values among cells  er   ez  eu and ed which contain the  Modelling the certainty of free space  distance between the current position and each side of the  On the other hand  paths along which there was no detection supply information of free space  that is ri     wall  l and N     wall  O  or equivalently  according to the axioms  of  necessity propagation  Such propagation starts at the central cell and spreads over all those cells laying within  possibility  theory   n  wall       This  possibility value increases with the distance to the central cell of the error rectangle and reaches the value   at the cells outside the limits of the error rectangle  Obviously   we have N wall      for all the cells covered by the error rectangle  Figure  b shows this case   error rectangle  i e  right  left  up and down respectively  This definition implies that their values are unitarily increased or decreased in each step of the propagation until  they reach the zero value  Let errorx be the length of the error rectangle base  and let errory be the rectangle height   then the error values are initially assigned at the central cell as follows  e  e   error x   and eu  ed   erro ryl  and  the following formulas are used to compute the height N  corresponding to each cell within the error rectangle   Figure   shows schematically the propagation process    N min Nx  Ny   where  lel e l el e  x err  N      err   x  err  max error           Il wall  l  Nr      N wall  O   Y     errY  y   er r               max error  e  e erry   d           initial cell  a   et   er   e   ed     N       max error   Il  wall   I  edge cell  et      er O  e      ed    N O  wall        o   oj   oj     lii    C a   b   N height  Figure     TI and N values assigned to cells corresponding  to  a  wall detection  and b  free space       N  VALUE ASSIGNMENT    eJ    The height of the pyramids in figure   are determined by the magnitude of the error  The underlying idea is to establish a linear error height relation such that  a null           fl  e      et     er  b   e      er      N O  e      error implies the maximum allowed value of height  i e  one   while an error too large implies a zero height since the information is no longer reliable  The error threshold that assigns a limit to a  too large  error is established  Figure    Value propagation  a  to adjacent cells  and b  along one dimension of the error rectangle   experimentally and is the same as the one that forces the robot to return from its exploration due to the irrelevancy of its later data  Summarising  the height values are obtained by applying the following formula   hezght             c  u rr  e n  t  e rr   o  r maximum allowed error                COMBINATION OF VALUES  The cell necessity and possibility values representing trajectories in free space and wall segments are propagated from a central cell to the cells around as we have seen above  In considering consecutive points along the trajectory of the robot or along a wall segment  some of        Incremental map generation  the cells covered by the current pyramid might already have values assigned by previous pyramids  and as a  independent wall detections in the same cell  and this  consequence the new values must be the result of a combination between these old and new values  In the case  support masses   of wall segments the values are necessities  increasing from    and are combined by using the max operation  figure   b   In the case of trajectories these values are possibilities  decreasing from    and are combined by means of the min operator  Figure   a  graphically shows the results of such combination  operation is nothing but Dempster s rule for simple  Bel  wall   a   i          Belt   wall   m    m   wall   a    a    a  a     and m  O          a       a      On the other hand  we also combine values coming from a single  wall  segment detection  and since we are  considering non independent evidences  Dempster s rule is not suitable for evidence combination  Instead  we have used a max combination  a cautious operation whose results are still under the evidence theory framework  Indeed  max combination is in accordance with the so called  combination of compatible Belief functions   Chateauneuf        that makes sense when interpreting  Bel Pl values as bounds of the probability measures consistent with them  Namely  let  F         PIB el  A  P A  Pl  A    a   be the family of such probabilities  Dempster        Then  their natural combination can be taken as the intersection   F      Fr    F     Pimax Be    A   Bel   A   P A  min P    A   Pl  A    In general   inf  PeF r IF   P A  and  suo  PeFl  F   P A  are not a pair of  Belief and Plausibility values  Chateauneuf        However  in our particular case  this combination leads to a proper belief function  Indeed  the function  b   Bel    wall   inf  Figure    Segment representation corresponding to  a  trajectories  possibility pyramids   and b  walls  necessity pyramids    When the same portion of a wall has been detected twice  or more  indepently  the necessities are combined by means of the probabilistic sum  that is S x y      x y   xy   in order to reinforce the certainty about the location of the wall  Figure  Be P is  defmedas    shows this situation  PEF rtF      P  A    max Bel  wall   Bel  wall      max a   a    Be        Belt     wall     Belt       a belief        function whose corresponding mass assignments  are    m wall   max a   a    m        m   wall      m  l   l max a  a   Moreover  in this particular case  this max combination is also in accordance with a new combination operation  proposed in  Torra     RESULTS  Figure Figure    Reinforcement combination of two wall segments  Following the interpretation of the Possibility Necessity assignments as Belief Plausibility values  we can justify now the use of the two different combination rules described above  On one hand  we have already seen that we  apply  the  probabilistic  sum when combining            shows some of the results obtained  in  simulation  with three robots departing from the point labelled  I  and taking into account the error position propagation along the trajectories   The  orthogonal  environment is represented by straight continuous lines  the trajectories by dark grey and the detected walls and obstacles by medium grey and the singular points by light grey  The darker the color along the three trajectories  the smaller the possibility value rr of existence of a wall or        Lopez Sanchez  Lopez de Mantaras  and Sierra  Figure    Global map obtained from three partial maps by three robots   I  indicates the exploration initial position of the robots  the sense that ech point i the map has a degree of being obstacle  For the detected wall segments  the lighter the emty and of bemg ccupied however their approach ijSes grey the smaller the certainty value N of the wall or straight fuzzy sets nstead o dual possibility necessity obstcle being in that position  The grey degradation in measures  another difference IS tha th y work with only the smgular points als  reflects the decrease of certainty   one robot and therefore no ooperatlon IS mvolved  finally   actual positiOn  The exploration stops when about their   they use ultrasomc sensors mstead of infrared ones and as the cumulated error is higher than a previously set value  a consequence the error accumulates faster than in our approach  The main consequence of working with only   RELATED WORK one robot and less precise sensors is that the maps built are significantly smaller  There are quite a few works addressing the problem of map building   Betge Brezetz et al        use landmarks  CONCLUSIONS AND FURTHER   defined as object features  to model natural environments WORK an the uncertainty associated to their position is estimated by means of probabilistic techniques assuming a The real robots are now working with a contour based gaussian distribution of the uncertainty  In the case of map building method also based on fuzzy techniques but certainty grid representations  the probabilistic approach we have detected some shortcomings due to the globality has been also widely used to estimate the probability of of the computational process involved  such shortcomings cell occupancy  Moravec and Elfes       Lim and Cho obliged us to adopt some ad hoc solutions during the       Pagac e t a          Probabilistic techniques are proces of map completion  see Amat et al         The reliable only If enough sensor data is available and  grid based method presented here is completely based on a furtermore  if the data is well distributed in the explored local computation process  the propagation of possibility envuonment and this distribution can be easily obtained  and necessity values from a cell to their neighbours   A very natural alternative when these conditions are not exploits better the information about free space conveyed met is provided by fuzzy set theory   Kim et al       use by the trajectories  takes advantage of the fact that fuzzy numbers to model the uncertainty of the parameters possibility and necessity are dual measures and  of geometric primitives and coordinate transformations furthermore  is computationally simpler  we are now in used to describe natural environments   Poloni et al        the process of incorporating this new approach to the real have also used fuzzy logic to build maps of unknown robots  On the other hand  further work is also in progress office like environments  Their work is similar to ours in regarding the problem of planning additional trajectories   Incremental map generation  towards zones of the environment poorly explored  In the long term we also plan to address the problem of learning h ighe r level environment concepts   corner    door   etc   based on sequences of sensor radings  i e  we plan to address the problem of symbol grounding at least in simple orthogonal environments Acknowledgments  We would like to thank our colleague Dr  Lluis Godo for h i s helpful c ontrib ut i ons and comments about the theoretical aspects of this work   The robots have been designed and built under the supervisi on of Prof  Jo se p Amat at the LSI department  UPC  Barcelona  Spain   References   Alami R   Cha t il l a R   Espiau B      Designing an Intelligent Control Architecture for Autonomous Robots  In Proceedings of the  th International Conference on Advanced Robotics  Tokyo           Amat J   Lopez de Mantaras R  and Sierra C   Cooperative autonomous robots for exploring unknown environments   In Proceedings of the  th International Symposium on Experimental Robotics        pp        Betge Brezetz S   Hebert P   Chatila R  and Devy M    Uncertain Map Making in Natural Environments   In Proceedings of the IEEE  International Conference on Robotics and Automation   pp I                 Brooks R  A    Intelligence Without Reason  In Proceedings of International Joint Conference of Artificial Intelligence  pp          Sydney  A ustrali a          Chateauneuf  A   Combination of Compatible Belief functions and relation of specificity     In Advances in Dempster Shafer Theory of Evidence  Wiley  New York  pp               Dempster  A P   Upper and lower probabilities induced by a multivalued mapping   In Annals of Mathematical Statistics  Vol     pp                   Dubois D   Prade H    Possibility Theory   Plenum Press  New York        Kim W  J   J  Hyup Ko and M  Jin Chung   Uncertain robot environment modelling using fuzzy numbers   Fuzzy Sets and Systems  Vol     pp               Lim  J H  and Cho  D W   Phisically Based Sensor Modelling for Sonar Map in Specular Environment   In Proceedings of the IEEE  International Conference on Robotics and Automation   pp                  Movarec  H  P and Elfes  A   Hight Resolution Maps from Wide Angle Sonar   In Pr ocee dings of the IEEE International Conference on Robotics and Automation  pp                 Pagac D   Nebot E  M  and Durrant White H   An evidential approach to probabilistic m ap buildin g   In       Pr oceedings of the IEEE  International Conference on pp                 Robotics and Automation    Poloni M   Ulivi G  and Vendittelli M   Fuzzy logic and autonomous vehicles  Experiments in ultrasonic vision   Fuzz y Sets and Systems  Vol     pp               Torra  V   A new combination Function in Evidence Theory   In International Journal of Intelligent Systems  IJIS   Vol     n              
